webpackJsonp([1],{"+/MR":function(t,e){},"/+LH":function(t,e){},"//Hc":function(t,e,s){"use strict";var a=s("HnsE"),n=s.n(a),r=s("LXxd");var o=function(t){s("IqON")},i=s("VU/8")(n.a,r.a,!1,o,"data-v-1acc1648",null);e.default=i.exports},"0Wu9":function(t,e){},"2YLd":function(t,e){},"3qdb":function(t,e){},B7lW:function(t,e){},"BT/O":function(t,e){},CxbR:function(t,e){},HnsE:function(t,e){t.exports={data:function(){var t=this;return{signin:{username:"",passwd:""},signup:{username:"",passwd1:"",passwd2:""},rules:{username:[{required:!0,message:"请输入用户名",trigger:"blur"},{min:3,max:15,message:"长度在3到15之间",trigger:"blur"}],passwd1:[{validator:function(e,s,a){""===s?a(new Error("请输入密码")):(""!==t.signup.passwd2&&t.$refs.signup.validateField("passwd2"),a())},trigger:"blur"},{min:6,max:15,message:"长度在6到15之间",trigger:"blur"}],passwd2:[{validator:function(e,s,a){""===s?a(new Error("请输入确认密码")):s!==t.signup.passwd1?a(new Error("密码不一致")):a()},trigger:"blur"},{min:6,max:15,message:"长度在6到15之间",trigger:"blur"}]},show:!0}},methods:{onSignin:function(){var t=this.$store,e=this.signin,s=this;this.$axios({method:"post",url:s.$store.state.target+"/account/signin",data:{id:null,accountname:e.username,passwd:e.password,regtime:null}}).then(function(e){console.log(e.data),console.log(e.data),200===e.data.code?(s.$store.commit("newAccountid",e.data.data.id),s.$store.commit("newAccountname",e.data.data.accountname),s.$store.commit("newAccountstatus",e.data.data.status),s.$message({message:"欢迎回来，"+s.signin.username,type:"success"}),s.initAndJump(),console.log(t.state.accountid+t.state.accountname)):s.$message.error("请检查用户名或密码")}).catch(function(t){s.$message.error("服务器异常"),console.log(t)})},onSignup:function(){""===this.signup.username?this.$message.error("用户名不能为空"):""===this.signup.passwd1||""===this.signup.passwd2?this.$message.error("密码不能为空"):this.signup.passwd1!==this.signup.passwd2?this.$message.error("密码不一致"):this.signup.passwd1.length<6||this.signup.passwd1.length>15?this.$message.error("密码长度在6到15之间"):this.createAccount()},createAccount:function(){var t=this,e=this.signup;this.$axios({method:"post",url:t.GLOBAL.tarUrl+"/account/signup",data:{id:null,accountname:e.username,passwd:e.passwd1,regtime:null,status:0}}).then(function(e){console.log(e.data),console.log(e.data),200===e.data.code?(t.accountname="",t.passwd="",t.signup.username="",t.signup.passwd1="",t.signup.passwd2="",t.$message({message:"账户注册成功",type:"success"})):t.$message({message:"账户注册失败，用户名已经存在",type:"error"})}).catch(function(e){t.show=!0,console.log(e),t.$message({message:"账户注册失败，请检查网络连接",type:"error"})})},initAndJump:function(){var t=this;this.$axios.get(t.GLOBAL.tarUrl+"/crosproj?authorname="+t.$store.state.accountname).then(function(e){200===e.data.code&&(t.$store.commit("newTableData",e.data.data),console.log(t.$store.state.tableData),t.$router.push("/researchers/"+t.signin.username))})}}}},IOHi:function(t,e){},IqON:function(t,e){},JFZf:function(t,e){},LXxd:function(t,e,s){"use strict";var a={render:function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticStyle:{margin:"60px"}},[s("div",{staticClass:"module form-module"},[s("div",[s("el-tabs",{attrs:{type:"border-card"}},[s("el-tab-pane",{attrs:{label:"登陆"}},[s("div",{staticStyle:{margin:"20px","margin-right":"40px"}},[s("el-form",{attrs:{"label-width":"80px"}},[s("el-form-item",{attrs:{label:"用户名"}},[s("el-input",{nativeOn:{keyup:function(e){return"button"in e||!t._k(e.keyCode,"enter",13,e.key,"Enter")?t.onSignin(e):null}},model:{value:t.signin.username,callback:function(e){t.$set(t.signin,"username",e)},expression:"signin.username"}})],1),t._v(" "),s("el-form-item",{attrs:{label:"密码"}},[s("el-input",{attrs:{type:"password"},nativeOn:{keyup:function(e){return"button"in e||!t._k(e.keyCode,"enter",13,e.key,"Enter")?t.onSignin(e):null}},model:{value:t.signin.password,callback:function(e){t.$set(t.signin,"password",e)},expression:"signin.password"}})],1),t._v(" "),s("el-form-item",[s("el-button",{attrs:{type:"primary"},on:{click:t.onSignin}},[t._v("登陆")])],1)],1)],1)]),t._v(" "),t.show?s("el-tab-pane",{attrs:{label:"注册"}},[s("div",{staticStyle:{margin:"20px","margin-right":"40px"}},[s("el-form",{ref:"signup",attrs:{model:t.signup,rules:t.rules,"label-width":"80px"}},[s("el-form-item",{attrs:{label:"用户名",prop:"username"}},[s("el-input",{nativeOn:{keyup:function(e){return"button"in e||!t._k(e.keyCode,"enter",13,e.key,"Enter")?t.onSignup(e):null}},model:{value:t.signup.username,callback:function(e){t.$set(t.signup,"username",e)},expression:"signup.username"}})],1),t._v(" "),s("el-form-item",{attrs:{label:"密码",prop:"passwd1"}},[s("el-input",{attrs:{type:"password"},nativeOn:{keyup:function(e){return"button"in e||!t._k(e.keyCode,"enter",13,e.key,"Enter")?t.onSignup(e):null}},model:{value:t.signup.passwd1,callback:function(e){t.$set(t.signup,"passwd1",e)},expression:"signup.passwd1"}})],1),t._v(" "),s("el-form-item",{attrs:{label:"密码确认",prop:"passwd2"}},[s("el-input",{attrs:{type:"password"},nativeOn:{keyup:function(e){return"button"in e||!t._k(e.keyCode,"enter",13,e.key,"Enter")?t.onSignup(e):null}},model:{value:t.signup.passwd2,callback:function(e){t.$set(t.signup,"passwd2",e)},expression:"signup.passwd2"}})],1),t._v(" "),s("el-form-item",[s("el-button",{attrs:{type:"primary"},on:{click:t.onSignup}},[t._v("注册")])],1)],1)],1)]):t._e()],1)],1)])])},staticRenderFns:[]};e.a=a},NHnr:function(t,e,s){"use strict";Object.defineProperty(e,"__esModule",{value:!0});s("+/MR");var a=s("7+uW"),n=s("zL8q"),r=s.n(n),o=s("mtWM"),i=s.n(o),l={render:function(){var t=this.$createElement,e=this._self._c||t;return e("body",{attrs:{id:"app"}},[e("router-view")],1)},staticRenderFns:[]};var c=s("VU/8")({name:"App"},l,!1,function(t){s("0Wu9")},null,null).exports,p={render:function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"hello"},[s("h1",[t._v(t._s(t.msg))]),t._v(" "),s("h2",[t._v("Essential Links")]),t._v(" "),t._m(0),t._v(" "),s("h2",[t._v("Ecosystem")]),t._v(" "),t._m(1)])},staticRenderFns:[function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("ul",[s("li",[s("a",{attrs:{href:"https://vuejs.org",target:"_blank"}},[t._v("\n        Core Docs\n      ")])]),t._v(" "),s("li",[s("a",{attrs:{href:"https://forum.vuejs.org",target:"_blank"}},[t._v("\n        Forum\n      ")])]),t._v(" "),s("li",[s("a",{attrs:{href:"https://chat.vuejs.org",target:"_blank"}},[t._v("\n        Community Chat\n      ")])]),t._v(" "),s("li",[s("a",{attrs:{href:"https://twitter.com/vuejs",target:"_blank"}},[t._v("\n        Twitter\n      ")])]),t._v(" "),s("br"),t._v(" "),s("li",[s("a",{attrs:{href:"http://vuejs-templates.github.io/webpack/",target:"_blank"}},[t._v("\n        Docs for This Template\n      ")])])])},function(){var t=this.$createElement,e=this._self._c||t;return e("ul",[e("li",[e("a",{attrs:{href:"http://router.vuejs.org/",target:"_blank"}},[this._v("\n        vue-router\n      ")])]),this._v(" "),e("li",[e("a",{attrs:{href:"http://vuex.vuejs.org/",target:"_blank"}},[this._v("\n        vuex\n      ")])]),this._v(" "),e("li",[e("a",{attrs:{href:"http://vue-loader.vuejs.org/",target:"_blank"}},[this._v("\n        vue-loader\n      ")])]),this._v(" "),e("li",[e("a",{attrs:{href:"https://github.com/vuejs/awesome-vue",target:"_blank"}},[this._v("\n        awesome-vue\n      ")])])])}]};var u=s("VU/8")({name:"HelloWorld",data:function(){return{msg:"Welcome to Your Vue.js App"}}},p,!1,function(t){s("rTc0")},"data-v-882a5e0a",null).exports,m=s("//Hc"),d={data:function(){return{sidebar:!0}},mounted:function(){0===this.$store.state.accountstatus&&(this.sidebar=!1,this.setUserInfo())},methods:{toLogOut:function(){this.$router.push("/")},setUserInfo:function(){this.$router.push("/researchers/"+this.$route.params.id+"/userinfo")},getProjectForm:function(){var t=this;this.$axios.get(t.GLOBAL.tarUrl+"/crosproj?authorname="+t.$store.state.accountname).then(function(e){200===e.data.code&&(t.$store.commit("newTableData",e.data.data),t.$router.push("/researchers/"+t.$store.state.accountname))})},crosApplicate:function(){console.log("crosapplicate"),this.$router.push("/researchers/"+this.$route.params.id+"/crosapply")},govApplicate:function(){console.log("govapplicate"),this.$router.push("/researchers/"+this.$route.params.id+"/govapply")},upLoadItem:function(){console.log("upload item"),this.$router.push("/researchers/"+this.$route.params.id+"/uploaditem")},getItemList:function(){console.log("upload item"),this.$router.push("/researchers/"+this.$route.params.id+"/getitemlist")},adminSignin:function(){this.$router.push("/admin/"+this.$store.state.accountname)}}},h={render:function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("el-container",{staticStyle:{height:"100px",border:"1px"}},[s("el-header",{staticStyle:{"text-align":"right","font-size":"20px","font-weight":"200",height:"80px"}},[s("el-button",{attrs:{type:"danger",icon:"el-icon-delete",circle:""},on:{click:t.toLogOut}}),t._v(" "),s("span",[t._v(t._s(this.$store.state.accountname))])],1),t._v(" "),s("el-container",[t.sidebar?s("el-aside",{staticStyle:{"background-color":"rgb(255, 255, 255)"},attrs:{width:"300px"}},[s("el-menu",{attrs:{"default-openeds":["1"]}},[s("el-submenu",{attrs:{index:"1"}},[s("template",{slot:"title"},[s("i",{staticClass:"el-icon-message"}),t._v("我的项目")]),t._v(" "),s("el-menu-item",{attrs:{index:"1-1"},nativeOn:{click:function(e){return t.getProjectForm(e)}}},[t._v("查看全部")])],2),t._v(" "),s("el-submenu",{attrs:{index:"2"}},[s("template",{slot:"title"},[s("i",{staticClass:"el-icon-menu"}),t._v("项目申请")]),t._v(" "),s("el-menu-item-group",[s("el-menu-item",{attrs:{index:"2-1"},nativeOn:{click:function(e){return t.crosApplicate(e)}}},[t._v("横向项目申请")]),t._v(" "),s("el-menu-item",{attrs:{index:"2-2"},nativeOn:{click:function(e){return t.govApplicate(e)}}},[t._v("纵向项目申请")])],1)],2),t._v(" "),s("el-submenu",{attrs:{index:"3"}},[s("template",{slot:"title"},[s("i",{staticClass:"el-icon--left"}),t._v("\n              科研成果\n            ")]),t._v(" "),s("el-menu-item",{attrs:{index:"3-1"},nativeOn:{click:function(e){return t.getItemList(e)}}},[t._v("查看")]),t._v(" "),s("el-menu-item",{attrs:{index:"3-2"},nativeOn:{click:function(e){return t.upLoadItem(e)}}},[t._v("申报")])],2),t._v(" "),s("el-submenu",{attrs:{index:"4"}},[s("template",{slot:"title"},[s("i",{staticClass:"el-icon-setting"}),t._v("设置")]),t._v(" "),s("el-menu-item",{attrs:{index:"4-1"},nativeOn:{click:function(e){return t.setUserInfo(e)}}},[t._v("账户信息")]),t._v(" "),s("el-menu-item",{attrs:{index:"4-2"}},[t._v("关于")])],2),t._v(" "),s("el-submenu",{attrs:{index:"5"}},[s("template",{slot:"title"},[s("i",{staticClass:"el-icon-bell"}),t._v("\n              高级功能\n            ")]),t._v(" "),s("el-menu-item",{attrs:{index:"5-1"},nativeOn:{click:function(e){return t.adminSignin(e)}}},[t._v("管理员")])],2)],1)],1):t._e(),t._v(" "),s("el-main",[s("div",{staticStyle:{width:"95%"}},[s("router-view")],1)])],1)],1)},staticRenderFns:[]};var f=s("VU/8")(d,h,!1,function(t){s("JFZf")},null,null).exports,v={data:function(){return{show:!0,loading:!0,form:{name:"",staffnum:"",id:"",birthday:"",tel:"",email:"",job:"",office:"",specialization:"",address:""},bt1:!0,bt2:!1,edit:!0,htmlTitle:"userinfo",httpmethod:"post"}},mounted:function(){console.log("get userinfo"),this.getUserinfo(this.$store.state.accountid),this.loading=!1},methods:{onChange:function(){this.bt1=!1,this.bt2=!0,this.edit=!1},onSubmit:function(){console.log("submit!  method:"+this.httpmethod),this.show=!1;var t=this,e=this.form;this.$axios({method:t.httpmethod,url:t.GLOBAL.tarUrl+"/userinfo",data:{accountid:t.$store.state.accountid,name:e.name,staffnum:e.staffnum,id:e.id,birthday:e.birthday,tel:e.tel,email:e.email,job:e.job,office:e.office,specialization:e.specialization,address:e.address,accounttype:"researcher"}}).then(function(e){console.log(e.data),200===e.data.code&&(t.show=!0,t.bt1=!0,t.bt2=!1,t.edit=!0,t.$notify({type:"success",title:"成功",message:"用户信息更改成功"}))}).catch(function(t){console.log(t),alert("更改失败")})},onCancel:function(){var t=this;this.show=!1,this.$nextTick(function(){return t.show=!0})},getUserinfo:function(t){var e=this;this.$axios.get(e.GLOBAL.tarUrl+"/userinfo?accountid="+t).then(function(t){200===t.data.code&&(e.form=t.data.data,e.httpmethod="put")}).catch()}}},g={render:function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",[t.show?s("el-form",t._b({attrs:{id:"pdfDom","label-width":"80px"}},"el-form",t.loading,!1),[s("el-form-item",{ref:t.form,attrs:{label:"姓名",model:t.form}},[s("el-col",{attrs:{span:6}},[s("el-input",{attrs:{disabled:t.edit},model:{value:t.form.name,callback:function(e){t.$set(t.form,"name",e)},expression:"form.name"}})],1)],1),t._v(" "),s("el-form-item",{attrs:{label:"员工编号"}},[s("el-col",{attrs:{span:6}},[s("el-input",{attrs:{disabled:t.edit},model:{value:t.form.staffnum,callback:function(e){t.$set(t.form,"staffnum",e)},expression:"form.staffnum"}})],1)],1),t._v(" "),s("el-form-item",{attrs:{label:"身份证号"}},[s("el-col",{attrs:{span:6}},[s("el-input",{attrs:{disabled:t.edit},model:{value:t.form.id,callback:function(e){t.$set(t.form,"id",e)},expression:"form.id"}})],1)],1),t._v(" "),s("el-form-item",{attrs:{label:"生日"}},[s("el-col",{attrs:{span:5}},[s("el-input",{attrs:{disabled:t.edit},model:{value:t.form.birthday,callback:function(e){t.$set(t.form,"birthday",e)},expression:"form.birthday"}})],1)],1),t._v(" "),s("el-form-item",{attrs:{label:"TEL"}},[s("el-col",{attrs:{span:6}},[s("el-input",{attrs:{disabled:t.edit},model:{value:t.form.tel,callback:function(e){t.$set(t.form,"tel",e)},expression:"form.tel"}})],1)],1),t._v(" "),s("el-form-item",{attrs:{label:"Email"}},[s("el-col",{attrs:{span:10}},[s("el-input",{attrs:{width:"5",disabled:t.edit},model:{value:t.form.email,callback:function(e){t.$set(t.form,"email",e)},expression:"form.email"}})],1)],1),t._v(" "),s("el-form-item",{attrs:{label:"职称"}},[s("el-col",{attrs:{span:10}},[s("el-input",{attrs:{disabled:t.edit},model:{value:t.form.job,callback:function(e){t.$set(t.form,"job",e)},expression:"form.job"}})],1)],1),t._v(" "),s("el-form-item",{attrs:{label:"办公室"}},[s("el-col",{attrs:{span:10}},[s("el-input",{attrs:{disabled:t.edit},model:{value:t.form.office,callback:function(e){t.$set(t.form,"office",e)},expression:"form.office"}})],1)],1),t._v(" "),s("el-form-item",{attrs:{label:"擅长领域"}},[s("el-col",{attrs:{span:10}},[s("el-input",{attrs:{disabled:t.edit},model:{value:t.form.specialization,callback:function(e){t.$set(t.form,"specialization",e)},expression:"form.specialization"}})],1)],1),t._v(" "),s("el-form-item",{attrs:{label:"住址"}},[s("el-col",{attrs:{span:10}},[s("el-input",{attrs:{disabled:t.edit},model:{value:t.form.address,callback:function(e){t.$set(t.form,"address",e)},expression:"form.address"}})],1)],1)],1):t._e(),t._v(" "),t.bt1?s("el-button",{attrs:{type:"primary"},on:{click:t.onChange}},[t._v("更改")]):t._e(),t._v(" "),t.bt2?s("el-button",{on:{click:t.onSubmit}},[t._v("提交")]):t._e(),t._v(" "),s("el-button",{on:{click:t.onCancel}},[t._v("取消")]),t._v(" "),s("el-button",{on:{click:function(e){t.getPdf()}}},[t._v("打印个人资料")])],1)},staticRenderFns:[]},b=s("VU/8")(v,g,!1,null,null,null).exports,_=s("//Fk"),$=s.n(_),x={data:function(){return{loading:!0,tableData:this.$store.state.tableData,htmlTitle:this.$store.state.accountname+"'scrossprojects",dialogVisible:!1,currentRow:0,projinfo:null,show:!0}},mounted:function(){for(var t in this.tableData)switch(this.tableData[t].apptime=this.tableData[t].apptime.substr(0,10),this.tableData[t].type){case 0:this.tableData[t].type="横向项目";break;case 1:this.tableData[t].type="纵向项目"}this.loading=!1},methods:{handleCurrentChange:function(t){this.currentRow=t,this.currentRow.status<=2?this.dialogVisible=!0:this.getProjInfo(),console.log(this.currentRow)},loadData:function(t){this.getFormPromise().then(function(e){t(e)}).catch(function(t){console.log(t)})},getFormPromise:function(){var t=this,e=this.$store.state.accountname,s=this;return new $.a(function(a,n){t.$axios.get(s.GLOBAL.tarUrl+"/crosproj?authorname="+e).then(function(t){a(t)}).catch(function(t){n(t)})})},setData:function(t){for(var e in this.tableData=t.data.data,console.log(this.tableData),this.tableData)switch(this.tableData[e].apptime=this.tableData[e].apptime.substr(0,10),this.tableData[e].type){case 0:this.tableData[e].type="横向项目";break;case 1:this.tableData[e].type="纵向项目"}console.log(this.tableData)},setStatus:function(t){switch(t){case 3:return"审核中";case 4:return"待拨款";case 5:return"已通过";case 6:return"结项申请中";case 7:return"已结项";default:return"未提交"}},filterTag:function(t,e){return e.status===t},setType:function(t){switch(t){case 3:return"warning";case 4:return"success";case 5:return"info";case 6:return"warning";default:return"danger"}},getProjInfo:function(){console.log("查找"+this.currentRow.id),this.$store.commit("newProj",this.currentRow),this.$router.push("/projects/"+this.$store.state.proj.name)},dialogDelete:function(){var t=this,e=this.currentRow.id;this.$axios.delete(t.GLOBAL.tarUrl+"/crosproj/"+e).then(function(e){200===e.data.code?t.$notify({title:"成功",message:"项目删除成功",type:"success"}):t.$notify({title:"失败",message:"项目删除失败",type:"fail"})}).catch(function(){t.show=!0,t.$notify({title:"失败",message:"项目删除失败",type:"fail"})}),this.dialogVisible=!1,this.refreshData()},dialogContinue:function(){var t=this.$store.state.accountname+"/crosapply/",e=this.$store.state.accountname+"/govapply/",s=t;switch(1===this.currentRow.type&&(s=e),this.currentRow.status){case 0:this.$store.commit("newProj",this.currentRow),this.$router.push(s+this.currentRow.name+"/form");break;case 1:this.$store.commit("newProj",this.currentRow),this.$router.push(s+this.currentRow.name+"/upload");break;case 2:this.$store.commit("newProj",this.currentRow),this.$router.push(s+this.currentRow.name+"/submit")}},refreshData:function(){var t=this;this.show=!1,this.$axios.get(t.GLOBAL.tarUrl+"/crosproj?authorname="+t.$store.state.accountname).then(function(e){200===e.data.code&&(t.$store.commit("newTableData",e.data.data),t.show=!0)})}}},w={render:function(){var t=this,e=t.$createElement,s=t._self._c||e;return t.show?s("div",[s("el-table",{directives:[{name:"loading",rawName:"v-loading",value:t.loading,expression:"loading"}],ref:"singleTable",staticStyle:{width:"100%"},attrs:{data:t.tableData,stripe:"",size:"small","highlight-current-row":"",id:"pdfDom"},on:{"current-change":t.handleCurrentChange}},[s("el-table-column",{attrs:{prop:"apptime",label:"申请时间",align:"center",width:"240"}}),t._v(" "),s("el-table-column",{attrs:{prop:"name",label:"项目名称",align:"center",width:"240"}}),t._v(" "),s("el-table-column",{attrs:{prop:"authorname",label:"申请人",align:"center",width:"240"}}),t._v(" "),s("el-table-column",{attrs:{prop:"type",label:"项目类型",align:"center",width:"240"}}),t._v(" "),s("el-table-column",{attrs:{prop:"status",label:"状态",align:"center",filters:[{text:"未提交",value:2},{text:"审核中",value:3},{text:"待拨款",value:4},{text:"已通过",value:5},{text:"结项申请中",value:6},{text:"已结项",value:7}],"filter-method":t.filterTag,"filter-placement":"bottom-end"},scopedSlots:t._u([{key:"default",fn:function(e){return[s("el-tag",{attrs:{type:t.setType(e.row.status),size:"small","close-transition":""}},[t._v(t._s(t.setStatus(e.row.status)))])]}}])})],1),t._v(" "),s("div",{staticStyle:{margin:"20px"}},[s("el-button",{on:{click:function(e){t.getPdf()}}},[t._v("导出为pdf")])],1),t._v(" "),s("el-dialog",{attrs:{visible:t.dialogVisible,title:"此项目申请还没获得审批，请选择操作"},on:{"update:visible":function(e){t.dialogVisible=e}}},[s("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[s("el-button",{attrs:{type:"warning"},on:{click:t.dialogDelete}},[t._v("删除此项目")]),t._v(" "),s("el-button",{attrs:{type:"primary"},on:{click:t.dialogContinue}},[t._v("填写并提交")])],1)])],1):t._e()},staticRenderFns:[]},y=s("VU/8")(x,w,!1,null,null,null).exports,j={data:function(){return{step:0,projname:"",bt1:!0,bt2:!1}},methods:{onNameCreate:function(){var t=this,e=this.$store.state.accountname;console.log(e),console.log("create"+this.projname),this.$axios({method:"post",url:t.GLOBAL.tarUrl+"/crosproj",data:{name:t.projname,authorname:e,status:0,type:0}}).then(function(e){console.log(e.data),200===e.data.code&&(console.log(e.data),t.$store.commit("newProj",e.data.data),t.bt1=!1,t.bt2=!0)})},onNext:function(){this.$router.push("/researchers/"+this.$store.state.accountname+"/crosapply/"+this.projname+"/form")}}},F={render:function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",[s("el-steps",{attrs:{active:t.step,"align-center":"","finish-status":"success"}},[s("el-step",{attrs:{title:"Step 1",description:"横向项目：项目名称"}}),t._v(" "),s("el-step",{attrs:{title:"Step 2",description:"横向项目：项目申请表填写"}}),t._v(" "),s("el-step",{attrs:{title:"Step 3",description:"横向项目：提交项目材料"}}),t._v(" "),s("el-step",{attrs:{title:"Step 4",description:"横向项目：项目审核"}})],1),t._v(" "),s("div",{staticStyle:{width:"100%",height:"200px",margin:"10px"}},[s("div",{staticStyle:{height:"30px"}}),t._v(" "),s("el-form",{attrs:{inline:!0,"label-width":"80px"}},[s("el-form-item",{attrs:{label:"项目名称"}},[s("el-input",{model:{value:t.projname,callback:function(e){t.projname=e},expression:"projname"}})],1),t._v(" "),s("el-form-item",[t.bt1?s("el-button",{on:{click:t.onNameCreate}},[t._v("创建")]):t._e()],1),t._v(" "),s("el-form-item",[t.bt2?s("el-button",{on:{click:t.onNext}},[t._v("下一步")]):t._e()],1)],1)],1)],1)},staticRenderFns:[]},A=s("VU/8")(j,F,!1,null,null,null).exports,k={render:function(){var t=this.$createElement,e=this._self._c||t;return e("div",[e("router-view")],1)},staticRenderFns:[]};var S=s("VU/8")({name:"ResCrosApplicant"},k,!1,function(t){s("OUhD")},"data-v-d04d0fd2",null).exports,L={data:function(){return{edit:!0,step:1,crosAppForm:{name:this.$store.state.proj.name},bt1:!0,bt2:!1}},methods:{onSubmit:function(){var t=this,e=this.$store.state.accountname,s=this.$store.state.proj.id;console.log(e+"projid:"+s),this.$axios({method:"post",url:t.GLOBAL.tarUrl+"/crosappform",data:{projectid:s,name:t.crosAppForm.name,type:t.crosAppForm.type,researchCost:t.crosAppForm.researchCost,expectedFounds:t.crosAppForm.expectedFounds,expectedFinishTime:t.crosAppForm.expectedFinishTime,partner:t.crosAppForm.partner,applicant:t.$store.state.accountid}}).then(function(e){console.log(e.data),200===e.data.code?(t.$notify({title:"成功",message:"创建申请表成功",type:"success"}),t.bt1=!1,t.bt2=!0):t.$notify.error({title:"失败",message:"创建申请表失败"})}).catch(function(){t.$notify.error({title:"失败",message:"创建申请表失败"})})},onNext:function(){this.$router.push("/researchers/"+this.$store.state.accountname+"/crosapply/"+this.$store.state.proj.name+"/upload")}}},R={render:function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",[s("el-steps",{attrs:{active:t.step,"align-center":"","finish-status":"success"}},[s("el-step",{attrs:{title:"Step 1",description:"项目名称"}}),t._v(" "),s("el-step",{attrs:{title:"Step 2",description:"项目申请表填写"}}),t._v(" "),s("el-step",{attrs:{title:"Step 3",description:"提交项目材料"}}),t._v(" "),s("el-step",{attrs:{title:"Step 4",description:"项目审核"}})],1),t._v(" "),s("el-form",{attrs:{"label-width":"170px",model:t.crosAppForm}},[s("el-form-item",{attrs:{label:"项目名称"}},[s("el-input",{attrs:{disabled:"edit"},model:{value:t.crosAppForm.name,callback:function(e){t.$set(t.crosAppForm,"name",e)},expression:"crosAppForm.name"}})],1),t._v(" "),s("el-form-item",{attrs:{label:"项目类型"}},[s("el-input",{model:{value:t.crosAppForm.type,callback:function(e){t.$set(t.crosAppForm,"type",e)},expression:"crosAppForm.type"}})],1),t._v(" "),s("el-form-item",{attrs:{label:"研究经费"}},[s("el-input",{model:{value:t.crosAppForm.researchCost,callback:function(e){t.$set(t.crosAppForm,"researchCost",e)},expression:"crosAppForm.researchCost"}})],1),t._v(" "),s("el-form-item",{attrs:{label:"预期经费"}},[s("el-input",{model:{value:t.crosAppForm.expectedFounds,callback:function(e){t.$set(t.crosAppForm,"expectedFounds",e)},expression:"crosAppForm.expectedFounds"}})],1),t._v(" "),s("el-form-item",{attrs:{label:"预期完成时间"}},[s("el-col",{staticStyle:{width:"120px"}},[s("el-date-picker",{attrs:{type:"date",placeholder:"选择日期",format:"yyyy 年 MM 月 dd 日","value-format":"yyyy-MM-dd"},model:{value:t.crosAppForm.expectedFinishTime,callback:function(e){t.$set(t.crosAppForm,"expectedFinishTime",e)},expression:"crosAppForm.expectedFinishTime"}})],1)],1),t._v(" "),s("el-form-item",{attrs:{label:"合作单位"}},[s("el-input",{model:{value:t.crosAppForm.partner,callback:function(e){t.$set(t.crosAppForm,"partner",e)},expression:"crosAppForm.partner"}})],1),t._v(" "),s("el-form-item",{attrs:{size:"large"}},[t.bt1?s("el-button",{attrs:{type:"primary"},on:{click:t.onSubmit}},[t._v("提交")]):t._e(),t._v(" "),t.bt2?s("el-button",{on:{click:t.onNext}},[t._v("下一步")]):t._e()],1)],1)],1)},staticRenderFns:[]},D=s("VU/8")(L,R,!1,null,null,null).exports,U={data:function(){return{name:"",age:"",file:"",step:2,show:!0}},methods:{getFile:function(t){this.file=t.target.files[0],console.log(this.file)},submitForm:function(t){t.preventDefault();var e=new FormData;e.append("projid",this.$store.state.proj.id),e.append("crossappfile",this.file),console.log(e);var s=this;this.$axios.post(s.GLOBAL.tarUrl+"/crossappfile",e,{headers:{"Content-Type":"multipart/form-data"}}).then(function(t){console.log(t),s.show=!1})},onNext:function(){var t="/crosapply/";1===this.$store.state.proj.type&&(t="/govapply/"),this.$router.push("/researchers/"+this.$store.state.accountname+t+this.$store.state.proj.name+"/submit")}}},T={render:function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",[s("el-steps",{attrs:{active:t.step,"align-center":"","finish-status":"success"}},[s("el-step",{attrs:{title:"Step 1",description:"项目名称"}}),t._v(" "),s("el-step",{attrs:{title:"Step 2",description:"项目申请表填写"}}),t._v(" "),s("el-step",{attrs:{title:"Step 3",description:"提交项目材料"}}),t._v(" "),s("el-step",{attrs:{title:"Step 4",description:"项目审核"}})],1),t._v(" "),s("div",{staticStyle:{margin:"100px"}}),t._v(" "),s("form",[s("input",{attrs:{type:"file"},on:{change:function(e){t.getFile(e)}}}),t._v(" "),t.show?s("el-button",{on:{click:function(e){t.submitForm(e)}}},[t._v("提交")]):s("el-button",{attrs:{type:"primary"},on:{click:t.onNext}},[t._v("下一步")])],1)],1)},staticRenderFns:[]};var C=s("VU/8")(U,T,!1,function(t){s("V09V")},"data-v-23a54274",null).exports,P={render:function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",[s("el-steps",{attrs:{active:t.step,"align-center":"","finish-status":"success"}},[s("el-step",{attrs:{title:"Step 1",description:"项目名称"}}),t._v(" "),s("el-step",{attrs:{title:"Step 2",description:"项目申请表填写"}}),t._v(" "),s("el-step",{attrs:{title:"Step 3",description:"提交项目材料"}}),t._v(" "),s("el-step",{attrs:{title:"Step 4",description:"项目审核"}})],1),t._v(" "),s("div",[s("div",{staticStyle:{margin:"200px"}}),t._v(" "),t.show?s("el-button",{on:{click:t.onSubmit}},[t._v("提交项目申请")]):s("el-button",{on:{click:t.onBack}},[t._v("返回主页")])],1)],1)},staticRenderFns:[]};var O=s("VU/8")({name:"ResCrosAppEnd",data:function(){return{step:3,show:!0}},methods:{onSubmit:function(){var t=this;this.$axios.put(t.GLOBAL.tarUrl+"/crossproj/submit/"+this.$store.state.proj.id).then(function(e){t.$notify({title:"成功",message:"提交成功",type:"success"}),t.step=4,t.show=!1})},onBack:function(){this.$router.push("/researchers/"+this.$store.state.username)}}},P,!1,function(t){s("zntr")},"data-v-ab9d1920",null).exports,I={data:function(){return{show:!0}},name:"AdminMainPage",methods:{showIssues:function(){this.$router.push("/admin/"+this.$store.state.accountname)},toLogOut:function(){this.$router.push("/")},getAllProjects:function(){this.getProjectsAndPush(2,"all")},getCrosProjects:function(){this.getProjectsAndPush(0,"cros")},getGovProjects:function(){this.getProjectsAndPush(1,"gov")},getProjectsAndPush:function(t,e){this.show=!1;var s=this;this.$axios.get(s.GLOBAL.tarUrl+"/crosproj/type/"+t).then(function(t){200===t.data.code&&(s.$store.commit("newTableData",t.data.data),s.show=!0,console.log(s.$store.state.tableData),s.$router.push("/admin/"+s.$store.state.accountname+"/projecttable/"+e))})},getItems:function(){this.$router.push("/admin/"+this.$store.state.accountname+"/items")}}},E={render:function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("el-container",[s("el-header",{staticStyle:{"background-color":"white",height:"40px"}},[s("el-menu",{staticClass:"el-menu-demo",attrs:{"default-active":t.activeIndex2,mode:"horizontal","background-color":"#545c64","text-color":"#fff","active-text-color":"#ffd04b"},on:{select:t.handleSelect}},[s("el-menu-item",{attrs:{index:"1"},on:{click:t.showIssues}},[t._v("Issues")]),t._v(" "),s("el-submenu",{attrs:{index:"2"}},[s("template",{slot:"title"},[t._v("科研项目")]),t._v(" "),s("el-menu-item",{attrs:{index:"2-1"},on:{click:t.getAllProjects}},[t._v("所有项目")]),t._v(" "),s("el-menu-item",{attrs:{index:"2-2"},on:{click:t.getCrosProjects}},[t._v("横向项目")]),t._v(" "),s("el-menu-item",{attrs:{index:"2-3"},on:{click:t.getGovProjects}},[t._v("纵向项目")])],2),t._v(" "),s("el-menu-item",{attrs:{index:"3"},on:{click:t.getItems}},[t._v("科研成果管理")])],1)],1),t._v(" "),s("el-header",{staticStyle:{"text-align":"right","font-size":"40px","background-color":"white",height:"55px"}},[s("el-dropdown",[s("i",{staticClass:"el-icon-setting",staticStyle:{"margin-right":"20px",color:"black"}},[t._v(t._s(this.$store.state.accountname))]),t._v(" "),s("el-dropdown-menu",{attrs:{slot:"dropdown"},slot:"dropdown"},[s("el-dropdown-item",{nativeOn:{click:function(e){return t.toLogOut(e)}}},[t._v("退出")])],1)],1)],1),t._v(" "),s("el-main",[t.show?s("router-view"):t._e()],1)],1)},staticRenderFns:[]};var V=s("VU/8")(I,E,!1,function(t){s("T0PP")},"data-v-566d9910",null).exports,B={name:"AdminProjForm",data:function(){return{tempData:[],tableData:[],htmlTitle:"projects"}},mounted:function(){console.log("set data"),this.loadData2()},methods:{handleCurrentChange:function(t){this.currentRow=t;this.$store.commit("newProj",this.currentRow),this.$router.push("/admin/"+this.$store.state.accountname+"/projects/"+this.$store.state.proj.name)},loadData2:function(){var t=this;this.$axios.get(t.GLOBAL.tarUrl+"/crosproj/all").then(function(e){for(var s in t.tableData=e.data.data,t.tableData)3!==t.tableData[s].status&&4!==t.tableData[s].status&&6!==t.tableData[s].status||t.tempData.push(t.tableData[s]),console.log("1")})},setStatus:function(t){switch(t){case 3:return"待审核";case 4:return"拨款申请";case 5:return"已通过";case 6:return"结项申请";case 7:return"已结项";default:return"未提交"}},filterTag:function(t,e){return e.status===t},setType:function(t){switch(t){case 3:return"warning";case 4:return"success";case 5:return"info";case 6:return"warning";default:return"danger"}}}},G={render:function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",[s("el-table",{staticStyle:{width:"100%"},attrs:{data:t.tempData,stripe:"",size:"medium",id:"pdfDom"},on:{"current-change":t.handleCurrentChange}},[s("el-table-column",{attrs:{prop:"apptime",label:"申请时间",align:"center",width:"250"}}),t._v(" "),s("el-table-column",{attrs:{prop:"name",label:"项目名称",align:"center"}}),t._v(" "),s("el-table-column",{attrs:{prop:"authorname",label:"申请人",align:"center",width:"350"}}),t._v(" "),s("el-table-column",{attrs:{prop:"type",label:"项目类型",align:"center",width:"240"}}),t._v(" "),s("el-table-column",{attrs:{prop:"status",label:"请求",align:"center",width:"250",filters:[{text:"审核中",value:3},{text:"待拨款",value:4},{text:"结项申请中",value:6}],"filter-method":t.filterTag,"filter-placement":"bottom-end"},scopedSlots:t._u([{key:"default",fn:function(e){return[s("el-tag",{attrs:{type:t.setType(e.row.status),size:"small","close-transition":""}},[t._v(t._s(t.setStatus(e.row.status)))])]}}])})],1),t._v(" "),s("div",{staticStyle:{margin:"20px"}},[s("el-button",{on:{click:function(e){t.getPdf()}}},[t._v("导出为pdf")])],1)],1)},staticRenderFns:[]};var z=s("VU/8")(B,G,!1,function(t){s("NWhh")},"data-v-42bc9b7c",null).exports,N={name:"ResUploadItem",data:function(){return{radio1:"论文",name:"",show:!0}},props:["projectid","projectname"],mounted:function(){console.log(this.projectid+this.projectname)},methods:{getFile:function(t){this.file=t.target.files[0],console.log(this.file)},submitForm:function(t){t.preventDefault();var e=new FormData;e.append("name",this.name),e.append("accountid",this.$store.state.accountid),e.append("itemfile",this.file),e.append("projectid",this.projectid),e.append("projectname",this.projectname),e.append("accountname",this.$store.state.accountname);var s=1;switch(this.radio1){case"论文":s=1;break;case"专著":s=2;break;case"获奖":s=3}e.append("type",s),console.log(e);var a=this;this.$axios.post(a.GLOBAL.tarUrl+"/item",e,{headers:{"Content-Type":"multipart/form-data"}}).then(function(t){console.log(t),a.$notify({title:"成功",message:"提交成功",type:"success"})})}}},q={render:function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("el-form",{attrs:{"label-width":"100px"}},[s("el-form-item",{attrs:{label:"名称"}},[s("el-input",{model:{value:t.name,callback:function(e){t.name=e},expression:"name"}},[t._v("名称")])],1),t._v(" "),s("el-form-item",{attrs:{label:"类别"}},[s("el-radio-group",{model:{value:t.radio1,callback:function(e){t.radio1=e},expression:"radio1"}},[s("el-radio-button",{attrs:{label:"论文"}}),t._v(" "),s("el-radio-button",{attrs:{label:"专著"}}),t._v(" "),s("el-radio-button",{attrs:{label:"获奖"}})],1)],1),t._v(" "),s("el-form-item",{attrs:{label:"文件上传"}},[s("input",{attrs:{type:"file"},on:{change:function(e){t.getFile(e)}}}),t._v(" "),s("el-button",{on:{click:function(e){t.submitForm(e)}}},[t._v("提交")])],1)],1)},staticRenderFns:[]};var M=s("VU/8")(N,q,!1,function(t){s("CxbR")},"data-v-3580591c",null).exports,H={name:"ResCrosProjDetails",data:function(){return{crosAppForm:{expectedFinishTime:"2018-01-01"},laName:"合作单位",projstatus:"审核中",dialogVisible:!1,addshow:!1,delButton:!1,show:!0}},components:{ResUploadItem:M},mounted:function(){this.getProjInfo(),console.log(this.crosAppForm),1===this.$store.state.proj.type&&(this.laName="项目主管部门"),this.$store.state.proj.status<=3&&(this.delButton=!0),this.$store.state.proj.status>3&&(this.addshow=!0),this.$store.state.proj.status>=6&&(this.show=!1)},methods:{getProjInfo:function(){var t=this.GLOBAL.tarUrl+"/crossproj/details/",e=this,s=this.$store.state.proj.id;console.log("try to get the details of project "+s),this.$axios.get(t+s).then(function(t){console.log(t.data.data),e.crosAppForm=t.data.data,e.crosAppForm.expectedFinishTime=e.crosAppForm.expectedFinishTime.substr(0,10)})},getProjFile:function(){var t=this.GLOBAL.tarUrl+"/crossappfile/";window.location=t+this.$store.state.proj.id},addItem:function(){this.dialogVisible=!0},deleteProj:function(){var t=this;this.$axios.delete(t.GLOBAL.tarUrl+"/crosproj/"+t.$store.state.proj.id).then(function(e){console.log(e),t.$notify({title:"成功",message:"删除成功",type:"success"}),t.$router.go(-1)})},appFinish:function(){var t=this;this.$axios.put(t.GLOBAL.tarUrl+"/crosproj/"+t.$store.state.proj.id+"/status/6").then(function(e){200===e.data.code&&t.$notify({title:"成功",message:"已经成功提交结题申请",type:"success"})})}}},W={render:function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",[s("el-form",{staticStyle:{"text-align":"left"},attrs:{"label-width":"200px"}},[s("el-form-item",{attrs:{label:"项目名称"}},[s("span",[t._v(t._s(t.crosAppForm.name))])]),t._v(" "),s("el-form-item",{attrs:{label:"申请人"}},[s("span",[t._v(t._s(t.$store.state.proj.authorname))])]),t._v(" "),s("el-form-item",{attrs:{label:"申请时间"}},[s("span",[t._v(t._s(t.$store.state.proj.apptime))])]),t._v(" "),s("el-form-item",{attrs:{label:"项目类型"}},[s("span",[t._v(t._s(t.crosAppForm.type))])]),t._v(" "),s("el-form-item",{attrs:{label:"研究经费"}},[s("span",[t._v(t._s(t.crosAppForm.researchCost))])]),t._v(" "),s("el-form-item",{attrs:{label:"预期完成时间"}},[s("span",[t._v(t._s(t.crosAppForm.expectedFinishTime))])]),t._v(" "),s("el-form-item",{attrs:{label:t.laName}},[s("span",[t._v(t._s(t.crosAppForm.partner))])]),t._v(" "),s("el-form-item",{attrs:{label:"状态"}},[s("span",[t._v(t._s(t.projstatus))])])],1),t._v(" "),s("div",{staticStyle:{"text-align":"left"}},[s("el-dialog",{attrs:{visible:t.dialogVisible,title:"添加科研成果"},on:{"update:visible":function(e){t.dialogVisible=e}}},[s("div",{staticStyle:{width:"350px",left:"50%",right:"50%",transform:"translate(+20%,+0%)"}},[s("ResUploadItem",{attrs:{projectid:t.$store.state.proj.id,projectname:t.$store.state.proj.name}})],1)]),t._v(" "),s("div",{staticStyle:{"margin-top":"100px","margin-left":"40%"}},[s("el-button",{attrs:{type:"primary",size:"small"},on:{click:t.getProjFile}},[t._v("下载申请书")]),t._v(" "),t.addshow?s("el-button",{attrs:{type:"warning",size:"small"},on:{click:t.addItem}},[t._v("添加科研成果")]):t._e(),t._v(" "),t.delButton?s("el-button",{attrs:{type:"danger",size:"small"},on:{click:t.deleteProj}},[t._v("删除该项目")]):t._e(),t._v(" "),t.show?s("el-button",{attrs:{type:"danger",size:"small"},on:{click:t.appFinish}},[t._v("申请结题")]):t._e()],1)],1)],1)},staticRenderFns:[]};var J=s("VU/8")(H,W,!1,function(t){s("/+LH")},"data-v-6c0d813b",null).exports,Y={name:"ResUploadSciItem",components:{ResUploadItem:M}},K={render:function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticStyle:{width:"350px",left:"50%",right:"50%",transform:"translate(+100%,+0%)"}},[e("div",{staticStyle:{"margin-top":"60px"}}),this._v(" "),e("ResUploadItem",{attrs:{projectid:"0",projectname:"无"}})],1)},staticRenderFns:[]};var X=s("VU/8")(Y,K,!1,function(t){s("3qdb")},"data-v-496fbfe0",null).exports,Z=s("pFYg"),Q=s.n(Z),tt={data:function(){return{tableData:[{type:1,name:"hello"}],currentRow:0}},props:["requrl"],mounted:function(){console.log(this.requrl),this.tableInit()},methods:{handleCurrentChange:function(t){this.currentRow=t,this.getItemFile(this.currentRow.id)},tagGen:function(t){var e="danger";switch(t){case 1:e="success";break;case 2:e="info";break;default:e="danger"}return e},getItemFile:function(t){console.log(t),window.location=this.GLOBAL.tarUrl+"/item/file/"+t},tableInit:function(){var t=this;this.$axios.get(this.requrl).then(function(e){200===e.data.code&&(t.tableData=e.data.data),console.log(Q()(e.data.data.data)),console.log(t.tableData)})},filterTag:function(t,e){return e.type===t},setStatus:function(t){switch(t){case 1:return"论文";case 2:return"专著";default:return"获奖"}}}},et={render:function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("el-table",{ref:"singleTable",staticStyle:{width:"100%"},attrs:{data:t.tableData,stripe:"",size:"small","highlight-current-row":"",id:"pdfDom"},on:{"current-change":t.handleCurrentChange}},[s("el-table-column",{attrs:{prop:"type",label:"项目类别",align:"center",filters:[{text:"论文",value:1},{text:"专著",value:2},{text:"获奖",value:3}],"filter-method":t.filterTag,width:"240","filter-placement":"bottom-end"},scopedSlots:t._u([{key:"default",fn:function(e){return[s("el-tag",{attrs:{type:t.tagGen(e.row.type),size:"small","close-transition":""}},[t._v(t._s(t.setStatus(e.row.type)))])]}}])}),t._v(" "),s("el-table-column",{attrs:{prop:"name",label:"成果名称",align:"center"}}),t._v(" "),s("el-table-column",{attrs:{prop:"accountname",label:"提交者",align:"center"}}),t._v(" "),s("el-table-column",{attrs:{prop:"projectname",label:"所属项目",align:"center"}})],1)},staticRenderFns:[]};var st=s("VU/8")(tt,et,!1,function(t){s("tcmK")},"data-v-26ceab4e",null).exports,at={name:"ResSciItemTable",components:{ResItemTable:st},methods:{setRequrl:function(){return this.GLOBAL.tarUrl+"/item/"+this.$store.state.accountid}}},nt={render:function(){var t=this.$createElement;return(this._self._c||t)("ResItemTable",{attrs:{requrl:this.setRequrl()}})},staticRenderFns:[]};var rt=s("VU/8")(at,nt,!1,function(t){s("B7lW")},"data-v-b41cca08",null).exports,ot={data:function(){return{step:0,projname:"",bt1:!0,bt2:!1}},methods:{onNameCreate:function(){var t=this,e=this.$store.state.accountname;console.log(e),console.log("create"+this.projname),this.$axios({method:"post",url:t.GLOBAL.tarUrl+"/crosproj",data:{name:t.projname,authorname:e,status:0,type:1}}).then(function(e){console.log(e.data),200===e.data.code&&(console.log(e.data),t.$store.commit("newProj",e.data.data),t.bt1=!1,t.bt2=!0)})},onNext:function(){var t="/crosapply/";1===this.$store.state.proj.type&&(t="/govapply/"),this.$router.push("/researchers/"+this.$store.state.accountname+t+this.projname+"/form")}}},it={render:function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",[s("el-steps",{attrs:{active:t.step,"align-center":"","finish-status":"success"}},[s("el-step",{attrs:{title:"Step 1",description:"纵向项目：项目名称"}}),t._v(" "),s("el-step",{attrs:{title:"Step 2",description:"纵向项目：项目申请表填写"}}),t._v(" "),s("el-step",{attrs:{title:"Step 3",description:"纵向项目：提交项目材料"}}),t._v(" "),s("el-step",{attrs:{title:"Step 4",description:"纵向项目：项目审核"}})],1),t._v(" "),s("div",{staticStyle:{width:"100%",height:"200px",margin:"10px"}},[s("div",{staticStyle:{height:"30px"}}),t._v(" "),s("el-form",{attrs:{inline:!0,"label-width":"80px"}},[s("el-form-item",{attrs:{label:"项目名称"}},[s("el-input",{model:{value:t.projname,callback:function(e){t.projname=e},expression:"projname"}})],1),t._v(" "),s("el-form-item",[t.bt1?s("el-button",{on:{click:t.onNameCreate}},[t._v("创建")]):t._e()],1),t._v(" "),s("el-form-item",[t.bt2?s("el-button",{on:{click:t.onNext}},[t._v("下一步")]):t._e()],1)],1)],1)],1)},staticRenderFns:[]},lt=s("VU/8")(ot,it,!1,null,null,null).exports,ct={data:function(){return{step:1,crosAppForm:{name:this.$store.state.proj.name},bt1:!0,bt2:!1}},methods:{onSubmit:function(){var t=this,e=this.$store.state.accountname,s=this.$store.state.proj.id;console.log(e+"projid:"+s),this.$axios({method:"post",url:t.GLOBAL.tarUrl+"/crosappform",data:{projectid:s,name:t.crosAppForm.name,type:t.crosAppForm.type,researchCost:t.crosAppForm.researchCost,expectedFounds:t.crosAppForm.expectedFounds,expectedFinishTime:t.crosAppForm.expectedFinishTime,partner:t.crosAppForm.partner,applicant:t.$store.state.accountid}}).then(function(e){console.log(e.data),200===e.data.code?(t.$notify({title:"成功",message:"创建申请表成功",type:"success"}),t.bt1=!1,t.bt2=!0):t.$notify.error({title:"失败",message:"创建申请表失败"})}).catch(function(){t.$notify.error({title:"失败",message:"创建申请表失败"})})},onNext:function(){var t="/crosapply/";1===this.$store.state.proj.type&&(t="/govapply/"),this.$router.push("/researchers/"+this.$store.state.accountname+t+this.$store.state.proj.name+"/upload")}}},pt={render:function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",[s("el-steps",{attrs:{active:t.step,"align-center":"","finish-status":"success"}},[s("el-step",{attrs:{title:"Step 1",description:"纵向项目：项目名称"}}),t._v(" "),s("el-step",{attrs:{title:"Step 2",description:"纵向项目：项目申请表填写"}}),t._v(" "),s("el-step",{attrs:{title:"Step 3",description:"纵向项目：提交项目材料"}}),t._v(" "),s("el-step",{attrs:{title:"Step 4",description:"纵向项目：项目审核"}})],1),t._v(" "),s("el-form",{attrs:{"label-width":"170px",model:t.crosAppForm}},[s("el-form-item",{attrs:{label:"项目名称"}},[s("el-input",{model:{value:t.crosAppForm.name,callback:function(e){t.$set(t.crosAppForm,"name",e)},expression:"crosAppForm.name"}})],1),t._v(" "),s("el-form-item",{attrs:{label:"项目类别"}},[s("el-input",{model:{value:t.crosAppForm.type,callback:function(e){t.$set(t.crosAppForm,"type",e)},expression:"crosAppForm.type"}})],1),t._v(" "),s("el-form-item",{attrs:{label:"研究经费"}},[s("el-input",{model:{value:t.crosAppForm.researchCost,callback:function(e){t.$set(t.crosAppForm,"researchCost",e)},expression:"crosAppForm.researchCost"}})],1),t._v(" "),s("el-form-item",{attrs:{label:"预期经费"}},[s("el-input",{model:{value:t.crosAppForm.expectedFounds,callback:function(e){t.$set(t.crosAppForm,"expectedFounds",e)},expression:"crosAppForm.expectedFounds"}})],1),t._v(" "),s("el-form-item",{attrs:{label:"预期完成时间"}},[s("el-col",{staticStyle:{width:"120px"}},[s("el-date-picker",{attrs:{type:"date",placeholder:"选择日期",format:"yyyy 年 MM 月 dd 日","value-format":"yyyy-MM-dd"},model:{value:t.crosAppForm.expectedFinishTime,callback:function(e){t.$set(t.crosAppForm,"expectedFinishTime",e)},expression:"crosAppForm.expectedFinishTime"}})],1)],1),t._v(" "),s("el-form-item",{attrs:{label:"项目主管部门"}},[s("el-input",{model:{value:t.crosAppForm.partner,callback:function(e){t.$set(t.crosAppForm,"partner",e)},expression:"crosAppForm.partner"}})],1),t._v(" "),s("el-form-item",{attrs:{size:"large"}},[t.bt1?s("el-button",{attrs:{type:"primary"},on:{click:t.onSubmit}},[t._v("提交")]):t._e(),t._v(" "),t.bt2?s("el-button",{on:{click:t.onNext}},[t._v("下一步")]):t._e()],1)],1)],1)},staticRenderFns:[]},ut=s("VU/8")(ct,pt,!1,null,null,null).exports,mt={data:function(){return{crosAppForm:{expectedFinishTime:"2018-01-01"},laName:"合作单位",projstatus:"审核中",bt1:!1,bt2:!1,bt3:!1,requirement:null}},mounted:function(){console.log(this.$store.state.proj.status),this.getProjInfo(),this.init(this.$store.state.proj.status)},methods:{init:function(t){switch(t){case 3:this.requirement="申请立项",this.bt1=!0;break;case 4:this.requirement="申请拨款",this.bt2=!0;break;case 6:this.requirement="申请结项",this.bt3=!0}},setAllFalse:function(){this.bt1=!1,this.bt2=!1,this.bt3=!1},button1:function(){var t=this;this.$axios.put(t.GLOBAL.tarUrl+"/crosproj/"+t.$store.state.proj.id+"/status/4").then(function(e){200===e.data.code&&(t.setAllFalse(),t.$notify({title:"成功",message:"已经成功通过立项申请",type:"success"}))})},button2:function(){var t=this;this.$axios.put(t.GLOBAL.tarUrl+"/crosproj/"+t.$store.state.proj.id+"/status/5").then(function(e){200===e.data.code&&(t.setAllFalse(),t.$notify({title:"成功",message:"已经成功拨款",type:"success"}))})},button3:function(){var t=this;this.$axios.put(t.GLOBAL.tarUrl+"/crosproj/"+t.$store.state.proj.id+"/status/7").then(function(e){200===e.data.code&&(t.setAllFalse(),t.$notify({title:"成功",message:"已经成功通过结题申请",type:"success"}))})},getProjInfo:function(){var t=this.GLOBAL.tarUrl+"/crossproj/details/",e=this,s=this.$store.state.proj.id;console.log("try to get the details of project "+s),this.$axios.get(t+s).then(function(t){console.log(t.data.data),e.crosAppForm=t.data.data,e.crosAppForm.expectedFinishTime=e.crosAppForm.expectedFinishTime.substr(0,10)})},getProjFile:function(){var t=this.GLOBAL.tarUrl+"/crossappfile/";window.location=t+this.$store.state.proj.id}}},dt={render:function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",[s("el-form",{staticStyle:{"text-align":"left"},attrs:{"label-width":"200px"}},[s("el-form-item",{attrs:{label:"项目名称"}},[s("span",[t._v(t._s(t.crosAppForm.name))])]),t._v(" "),s("el-form-item",{attrs:{label:"申请人"}},[s("span",[t._v(t._s(t.$store.state.proj.authorname))])]),t._v(" "),s("el-form-item",{attrs:{label:"申请时间"}},[s("span",[t._v(t._s(t.$store.state.proj.apptime))])]),t._v(" "),s("el-form-item",{attrs:{label:"项目类型"}},[s("span",[t._v(t._s(t.crosAppForm.type))])]),t._v(" "),s("el-form-item",{attrs:{label:"研究经费"}},[s("span",[t._v(t._s(t.crosAppForm.researchCost))])]),t._v(" "),s("el-form-item",{attrs:{label:"预期完成时间"}},[s("span",[t._v(t._s(t.crosAppForm.expectedFinishTime))])]),t._v(" "),s("el-form-item",{attrs:{label:t.laName}},[s("span",[t._v(t._s(t.crosAppForm.partner))])]),t._v(" "),s("el-form-item",{attrs:{label:"状态"}},[s("span",[t._v(t._s(t.projstatus))])])],1),t._v(" "),s("div",{staticStyle:{"text-align":"left"}},[s("el-form",{attrs:{"label-width":"200px"}},[s("el-form-item",{attrs:{label:"申请"}},[s("span",[t._v(t._s(t.requirement))])])],1),t._v(" "),s("div",{staticStyle:{"margin-top":"100px","margin-left":"40%"}},[s("el-button",{attrs:{type:"primary",size:"small"},on:{click:t.getProjFile}},[t._v("下载申请书")]),t._v(" "),t.bt1?s("el-button",{attrs:{type:"primary",size:"small"},on:{click:t.button1}},[t._v("同意立项")]):t._e(),t._v(" "),t.bt2?s("el-button",{attrs:{type:"danger",size:"small"},on:{click:t.button2}},[t._v("确定拨款")]):t._e(),t._v(" "),t.bt3?s("el-button",{attrs:{type:"danger",size:"small"},on:{click:t.button3}},[t._v("允许结题")]):t._e()],1)],1)],1)},staticRenderFns:[]};var ht=s("VU/8")(mt,dt,!1,function(t){s("BT/O")},"data-v-10a4a9c5",null).exports,ft={name:"AdminProjInfo",data:function(){return{laName:"合作单位",projstatus:"审核中",show:!0}},props:["crosAppForm"],mounted:function(){this.getProjInfo(),console.log(this.crosAppForm),1===this.$store.state.proj.type&&(this.laName="项目主管部门"),this.$store.state.proj.status>=6&&(this.show=!1)},methods:{getProjInfo:function(){var t=this.GLOBAL.tarUrl+"/crossproj/details/",e=this,s=this.$store.state.proj.id;console.log("try to get the details of project "+s),this.$axios.get(t+s).then(function(t){console.log(t.data.data),e.crosAppForm=t.data.data,e.crosAppForm.expectedFinishTime=e.crosAppForm.expectedFinishTime.substr(0,10)})}}},vt={render:function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("el-form",{staticStyle:{"text-align":"left"},attrs:{"label-width":"200px"}},[s("el-form-item",{attrs:{label:"项目名称"}},[s("span",[t._v(t._s(t.crosAppForm.name))])]),t._v(" "),s("el-form-item",{attrs:{label:"申请人"}},[s("span",[t._v(t._s(t.$store.state.proj.authorname))])]),t._v(" "),s("el-form-item",{attrs:{label:"申请时间"}},[s("span",[t._v(t._s(t.$store.state.proj.apptime))])]),t._v(" "),s("el-form-item",{attrs:{label:"项目类型"}},[s("span",[t._v(t._s(t.crosAppForm.type))])]),t._v(" "),s("el-form-item",{attrs:{label:"研究经费"}},[s("span",[t._v(t._s(t.crosAppForm.researchCost))])]),t._v(" "),s("el-form-item",{attrs:{label:"预期完成时间"}},[s("span",[t._v(t._s(t.crosAppForm.expectedFinishTime))])]),t._v(" "),s("el-form-item",{attrs:{label:t.laName}},[s("span",[t._v(t._s(t.crosAppForm.partner))])]),t._v(" "),s("el-form-item",{attrs:{label:"状态"}},[s("span",[t._v(t._s(t.projstatus))])])],1)},staticRenderFns:[]};var gt={comments:{AdminProjInfo:s("VU/8")(ft,vt,!1,function(t){s("IOHi")},"data-v-020889e4",null).exports},data:function(){return{tableData:this.$store.state.tableData,htmlTitle:this.$store.state.accountname+"'scrossprojects",dialogVisible:!1,currentRow:0,projinfo:null}},mounted:function(){for(var t in this.tableData)switch(this.tableData[t].apptime=this.tableData[t].apptime.substr(0,10),this.tableData[t].type){case 0:this.tableData[t].type="横向项目";break;case 1:this.tableData[t].type="纵向项目"}},methods:{handleCurrentChange:function(t){if(this.currentRow=t,this.currentRow.status>=3){this.currentRow=t;this.$store.commit("newProj",this.currentRow),this.$router.push("/admin/"+this.$store.state.accountname+"/projects/"+this.$store.state.proj.name)}console.log(this.currentRow)},setStatus:function(t){switch(t){case 3:return"审核中";case 4:return"待拨款";case 5:return"已通过";case 6:return"结项申请中";case 7:return"已结项";default:return"未提交"}},filterTag:function(t,e){return 2===t?e.status<=2:e.status===t},setType:function(t){switch(t){case 3:return"warning";case 4:return"success";case 5:return"info";case 6:return"warning";default:return"danger"}},getProjInfo:function(){console.log("查找"+this.currentRow.id),this.$store.commit("newProj",this.currentRow),this.$router.push("/projects/"+this.$store.state.proj.name)}}},bt={render:function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",[s("el-table",{ref:"singleTable",staticStyle:{width:"100%"},attrs:{data:t.tableData,stripe:"",size:"small","highlight-current-row":"",id:"pdfDom"},on:{"current-change":t.handleCurrentChange}},[s("el-table-column",{attrs:{prop:"apptime",label:"申请时间",align:"center",width:"240"}}),t._v(" "),s("el-table-column",{attrs:{prop:"name",label:"项目名称",align:"center",width:"240"}}),t._v(" "),s("el-table-column",{attrs:{prop:"authorname",label:"申请人",align:"center",width:"240"}}),t._v(" "),s("el-table-column",{attrs:{prop:"type",label:"项目类型",align:"center",width:"240"}}),t._v(" "),s("el-table-column",{attrs:{prop:"status",label:"状态",align:"center",filters:[{text:"未提交",value:2},{text:"审核中",value:3},{text:"待拨款",value:4},{text:"已通过",value:5},{text:"结项申请中",value:6},{text:"已结项",value:7}],"filter-method":t.filterTag,"filter-placement":"bottom-end"},scopedSlots:t._u([{key:"default",fn:function(e){return[s("el-tag",{attrs:{type:t.setType(e.row.status),size:"small","close-transition":""}},[t._v(t._s(t.setStatus(e.row.status)))])]}}])})],1),t._v(" "),s("div",{staticStyle:{margin:"20px"}},[s("el-button",{on:{click:function(e){t.getPdf()}}},[t._v("导出为pdf")])],1),t._v(" "),s("el-dialog",{attrs:{visible:t.dialogVisible,title:"项目详情"},on:{"update:visible":function(e){t.dialogVisible=e}}},[s("AdminProjInfo"),t._v(" "),s("p",[t._v("xiangqing")])],1)],1)},staticRenderFns:[]},_t=s("VU/8")(gt,bt,!1,null,null,null).exports,$t={name:"AdminSciItemTable",components:{ResItemTable:st},methods:{setRequrl:function(){return this.GLOBAL.tarUrl+"/items"}}},xt={render:function(){var t=this.$createElement;return(this._self._c||t)("ResItemTable",{attrs:{requrl:this.setRequrl()}})},staticRenderFns:[]};var wt=s("VU/8")($t,xt,!1,function(t){s("2YLd")},"data-v-0fd145e2",null).exports,yt=[{path:"/HelloWorld",name:"HelloWorld",component:u},{path:"/",name:"ResLogin",component:m.default},{path:"/test",name:"ResCrosAppForm",component:D},{path:"/researchers/:id",name:"ResMainPage",component:f,children:[{path:"",component:y},{path:"userinfo",component:b},{path:"crosapply",component:S,children:[{path:"",component:A},{path:"name",component:A},{path:":projname/form",component:D},{path:":projname/upload",component:C},{path:":projname/submit",component:O}]},{path:"govapply",component:S,children:[{path:"",component:lt},{path:":projname/form",component:ut},{path:":projname/upload",component:C},{path:":projname/submit",component:O}]},{path:"/projects/:projname",component:J},{path:"uploaditem",component:X},{path:"getitemlist",component:rt}]},{path:"/admin/:username/",component:V,children:[{path:"",component:z},{path:"projects/:projname",component:ht},{path:"projecttable/all",component:_t},{path:"projecttable/cros",component:_t},{path:"projecttable/gov",component:_t},{path:"items",component:wt}]},{path:"/:projname/form",component:D},{path:"/admin",component:V},{path:"/uploaditem",component:M},{path:"/getitemlist",component:st},{path:"/govappname",component:ht}],jt=s("/ocq"),Ft=s("NYxO");a.default.use(Ft.a);var At=new Ft.a.Store({state:{target:"http://localhost:8088",accountid:0,accountname:"testuser",accountstatus:0,proj:[],tableData:[]},mutations:{newAccountid:function(t,e){t.accountid=e},newAccountname:function(t,e){t.accountname=e},newAccountstatus:function(t,e){t.accountstatus=e},newProj:function(t,e){t.proj=e},newTableData:function(t,e){t.tableData=e}}}),kt=s("2Pnh"),St=s.n(kt),Lt=s("l9mu"),Rt=s.n(Lt),Dt={install:function(t,e){t.prototype.getPdf=function(){console.log("print");var t=this.htmlTitle;St()(document.querySelector("#pdfDom"),{allowTaint:!0}).then(function(e){var s=e.width,a=e.height,n=s/592.28*841.89,r=a,o=0,i=592.28/s*a,l=e.toDataURL("image/jpeg",1),c=new Rt.a("","pt","a4");if(r<n)c.addImage(l,"JPEG",0,0,595.28,i);else for(;r>0;)c.addImage(l,"JPEG",0,o,595.28,i),o-=841.89,(r-=n)>0&&c.addPage();c.save(t+".pdf")})}}},Ut={tarUrl:"http://120.78.135.143:8088"},Tt=s("VU/8")(Ut,null,!1,null,null,null).exports;a.default.config.productionTip=!1,a.default.prototype.$axios=i.a,a.default.prototype.GLOBAL=Tt,a.default.use(jt.a),a.default.use(r.a),a.default.use(Ft.a),a.default.use(Dt);var Ct=new jt.a({routes:yt});new a.default({el:"#app",render:function(t){return t(c)},router:Ct,store:At,components:{App:c},template:"<App/>",mounted:function(){"testuser"===this.$store.state.accountname&&this.$router.push("/")}})},NWhh:function(t,e){},OUhD:function(t,e){},T0PP:function(t,e){},V09V:function(t,e){},rTc0:function(t,e){},tcmK:function(t,e){},zntr:function(t,e){}},["NHnr"]);
//# sourceMappingURL=app.814a1d19d4def97d4084.js.map